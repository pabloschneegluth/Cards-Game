import { runBeforeTestStarts, runWhenTestSuccessful } from "../util";
import { Post_20220725_IdeasHaveLevels_Context } from "./Post_20220725_IdeasHaveLevels_Context";

// !!! IMPORTANT !!!
// This test file is AUTOGENERATED by yarn create-tests
// If you need to update it, run yarn create-tests
// DO NOT MODIFY manually. Keep running yarn create-tests instead,
// while editing your posts.

test("2022-07-25_ideas_have_levels.md", async () => {
  await runBeforeTestStarts(
    "2022-07-25_ideas_have_levels",
    "19ad66ca57a036c8ed22f51c75a62507"
  );

  const context = new Post_20220725_IdeasHaveLevels_Context();
  await context.beforeTest();

  // # Ideas Have Levels                                                                                       // # Ideas Have Levels

  // ## Increasing XP                                                                                          // ## Increasing XP
  await context.enterTheGame(); //                                                                             // * Enter the game.
  await context.thereShouldBeTheSIdea("Harvest Idea"); //                                                      // * There should be the "Harvest Idea" idea.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 1, 0); //                                           // * The "Harvest Idea" should have level 1 and 0 XP.
  await context.drawACardFromTheSIdea("Harvest Idea"); //                                                      // * Draw a card from the "Harvest Idea" idea.
  await context.moveTheSCardToItsOwnStack("Harvest Idea"); //                                                  // * Move the "Harvest Idea" card to its own stack.
  await context.moveTheSCardOnTopOfTheSCard("Villager", "Harvest Idea"); //                                    // * Move the "Villager" card on top of the "Harvest Idea" card.
  await context.moveTheSCardOnTopOfTheSCard("Berry Bush", "Villager"); //                                      // * Move the "Berry Bush" card on top of the "Villager" card.
  await context.thereShouldBeNStacksOfNSNSAndNSCards(
    1,
    1,
    "Harvest Idea",
    1,
    "Villager",
    1,
    "Berry Bush"
  ); // // * There should be 1 stacks of 1 "Harvest Idea", 1 "Villager", and 1 "Berry Bush" cards.
  await context.thereShouldBeNSCards(1, "Berry"); //                                                           // * There should be 1 "Berry" cards.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 1, 0); //                                           // * The "Harvest Idea" should have level 1 and 0 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 1, 1); //                                           // * The "Harvest Idea" should have level 1 and 1 XP.
  await context.thereShouldBeNSCards(2, "Berry"); //                                                           // * There should be 2 "Berry" cards.
  // ### Gaining several XP at once                                                                            // ### Gaining several XP at once
  await context.givenANewGame(); //                                                                            // * Given a new game.
  await context.givenThereIsTheSIdea("Harvest Idea"); //                                                       // * Given there is the "Harvest Idea" idea.
  await context.givenThereAreNSCards(2, "Berry"); //                                                           // * Given there are 2 "Berry" cards.
  await context.givenThereAreNStacksOfNSNSAndNSCards(
    2,
    1,
    "Harvest Idea",
    1,
    "Villager",
    1,
    "Berry Bush"
  ); // // * Given there are 2 stacks of 1 "Harvest Idea", 1 "Villager", and 1 "Berry Bush" cards.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 1, 0); //                                           // * The "Harvest Idea" should have level 1 and 0 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 1, 2); //                                           // * The "Harvest Idea" should have level 1 and 2 XP.

  // ## Increasing level                                                                                       // ## Increasing level
  await context.givenANewGame(); //                                                                            // * Given a new game.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 9); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 9 XP.
  await context.givenThereAreNSCards(1, "Berry"); //                                                           // * Given there are 1 "Berry" cards.
  await context.givenThereAreNStacksOfNSNSAndNSCards(
    1,
    1,
    "Harvest Idea",
    1,
    "Villager",
    1,
    "Berry Bush"
  ); // // * Given there are 1 stacks of 1 "Harvest Idea", 1 "Villager", and 1 "Berry Bush" cards.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 2, 0); //                                           // * The "Harvest Idea" should have level 2 and 0 XP.
  await context.thereShouldBeNSCards(3, "Berry"); //                                                           // * There should be 3 "Berry" cards.
  // ### Increasing more levels                                                                                // ### Increasing more levels
  // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |                                      // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |
  // #### |---------------:|--------------:|------------:|-------------:|                                      // #### |---------------:|--------------:|------------:|-------------:|
  // #### |              1 |             9 |           2 |            3 |                                      // #### |              1 |             9 |           2 |            3 |
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 9); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 9 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  // #### And result                                                                                           // #### And result
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 2, 0); //                                           // * The "Harvest Idea" should have level 2 and 0 XP.
  await context.thereShouldBeNSCards(3, "Berry"); //                                                           // * There should be 3 "Berry" cards.
  // ### Increasing more levels                                                                                // ### Increasing more levels
  // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |                                      // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |
  // #### |---------------:|--------------:|------------:|-------------:|                                      // #### |---------------:|--------------:|------------:|-------------:|
  // #### |              2 |            19 |           3 |            4 |                                      // #### |              2 |            19 |           3 |            4 |
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 2, 19); //                                  // * Given there is the "Harvest Idea" idea at level 2 and 19 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  // #### And result                                                                                           // #### And result
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 3, 0); //                                           // * The "Harvest Idea" should have level 3 and 0 XP.
  await context.thereShouldBeNSCards(4, "Berry"); //                                                           // * There should be 4 "Berry" cards.
  // ### Increasing more levels                                                                                // ### Increasing more levels
  // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |                                      // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |
  // #### |---------------:|--------------:|------------:|-------------:|                                      // #### |---------------:|--------------:|------------:|-------------:|
  // #### |              3 |            29 |           4 |            5 |                                      // #### |              3 |            29 |           4 |            5 |
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 3, 29); //                                  // * Given there is the "Harvest Idea" idea at level 3 and 29 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  // #### And result                                                                                           // #### And result
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 4, 0); //                                           // * The "Harvest Idea" should have level 4 and 0 XP.
  await context.thereShouldBeNSCards(5, "Berry"); //                                                           // * There should be 5 "Berry" cards.
  // ### Increasing more levels                                                                                // ### Increasing more levels
  // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |                                      // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |
  // #### |---------------:|--------------:|------------:|-------------:|                                      // #### |---------------:|--------------:|------------:|-------------:|
  // #### |              4 |            39 |           5 |            6 |                                      // #### |              4 |            39 |           5 |            6 |
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 4, 39); //                                  // * Given there is the "Harvest Idea" idea at level 4 and 39 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  // #### And result                                                                                           // #### And result
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 5, 0); //                                           // * The "Harvest Idea" should have level 5 and 0 XP.
  await context.thereShouldBeNSCards(6, "Berry"); //                                                           // * There should be 6 "Berry" cards.
  // ### Increasing more levels                                                                                // ### Increasing more levels
  // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |                                      // #### | $PreviousLevel |  $XPThreshold |  $NextLevel | $NextBerries |
  // #### |---------------:|--------------:|------------:|-------------:|                                      // #### |---------------:|--------------:|------------:|-------------:|
  // #### |              5 |            49 |           6 |            7 |                                      // #### |              5 |            49 |           6 |            7 |
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 5, 49); //                                  // * Given there is the "Harvest Idea" idea at level 5 and 49 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  // #### And result                                                                                           // #### And result
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 6, 0); //                                           // * The "Harvest Idea" should have level 6 and 0 XP.
  await context.thereShouldBeNSCards(7, "Berry"); //                                                           // * There should be 7 "Berry" cards.
  // ### XP are not lost                                                                                       // ### XP are not lost
  await context.givenANewGameWithNSProductionStack(3, "Berry Bush"); //                                        // * Given a new game with 3 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 9); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 9 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 2, 2); //                                           // * The "Harvest Idea" should have level 2 and 2 XP.

  // ## New ideas from existing ideas                                                                          // ## New ideas from existing ideas
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 9); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 9 XP.
  await context.thereShouldBeNoSIdea("Seed Idea"); //                                                          // * There should be no "Seed Idea" idea.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 2, 0); //                                           // * The "Harvest Idea" should have level 2 and 0 XP.
  await context.thereShouldBeTheSIdea("Seed Idea"); //                                                         // * There should be the "Seed Idea" idea.
  await context.theSShouldHaveLevelNAndNXp("Seed Idea", 1, 0); //                                              // * The "Seed Idea" should have level 1 and 0 XP.
  // ### Do not lose old XP gaining again                                                                      // ### Do not lose old XP gaining again
  await context.givenANewGameWithNSProductionStack(1, "Berry Bush"); //                                        // * Given a new game with 1 "Berry Bush" production stack.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 9); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 9 XP.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Seed Idea", 3, 12); //                                     // * Given there is the "Seed Idea" idea at level 3 and 12 XP.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSShouldHaveLevelNAndNXp("Harvest Idea", 2, 0); //                                           // * The "Harvest Idea" should have level 2 and 0 XP.
  await context.theSShouldHaveLevelNAndNXp("Seed Idea", 3, 12); //                                             // * The "Seed Idea" should have level 3 and 12 XP.

  // ## Ideas may take several moons.                                                                          // ## Ideas may take several moons.
  await context.givenANewGame(); //                                                                            // * Given a new game.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Seed Idea", 1, 0); //                                      // * Given there is the "Seed Idea" idea at level 1 and 0 XP.
  await context.givenThereAreNStacksOfNSCards(1, 5, "Berry"); //                                               // * Given there are 1 stacks of 5 "Berry" cards.
  await context.givenThereAreNStacksOfNSNSAndNSCards(
    1,
    1,
    "Seed Idea",
    1,
    "Villager",
    1,
    "Berry"
  ); //         // * Given there are 1 stacks of 1 "Seed Idea", 1 "Villager", and 1 "Berry" cards.
  await context.givenThereAreNSCards(0, "Berry Bush"); //                                                      // * Given there are 0 "Berry Bush" cards.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSIdeaShouldRequireNCardWithAtLeastNInSTag(
    "Seed Idea",
    1,
    1,
    "Seed"
  ); //                    // * The "Seed Idea" idea should require 1 card with at least 1 in "Seed" tag.
  await context.theSIdeaShouldRequireNCardWithAtLeastNInSTag(
    "Seed Idea",
    1,
    1,
    "Worker"
  ); //                  // * The "Seed Idea" idea should require 1 card with at least 1 in "Worker" tag.
  await context.theSCardShouldHaveNInSTag("Berry", 1, "Seed"); //                                              // * The "Berry" card should have 1 in "Seed" tag.
  await context.theSCardDescriptionShouldSaySIsS(
    "Berry",
    "Plant",
    "Berry Bush"
  ); //                           // * The "Berry" card description should say "Plant" is "Berry Bush".
  await context.theSShouldHaveLevelNAndNXp("Seed Idea", 1, 0); //                                              // * The "Seed Idea" should have level 1 and 0 XP.
  await context.thereShouldBeNSCards(0, "Berry Bush"); //                                                      // * There should be 0 "Berry Bush" cards.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 1, 5); //                                            // * The "Seed Idea" card progress should be 1 of 5.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 2, 5); //                                            // * The "Seed Idea" card progress should be 2 of 5.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 3, 5); //                                            // * The "Seed Idea" card progress should be 3 of 5.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 4, 5); //                                            // * The "Seed Idea" card progress should be 4 of 5.
  await context.theSShouldHaveLevelNAndNXp("Seed Idea", 1, 0); //                                              // * The "Seed Idea" should have level 1 and 0 XP.
  await context.thereShouldBeNSCards(0, "Berry Bush"); //                                                      // * There should be 0 "Berry Bush" cards.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 4, 5); //                                            // * The "Seed Idea" card progress should be 4 of 5.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.theSCardProgressShouldBeNOfN("Seed Idea", 0, 5); //                                            // * The "Seed Idea" card progress should be 0 of 5.
  await context.theSShouldHaveLevelNAndNXp("Seed Idea", 1, 1); //                                              // * The "Seed Idea" should have level 1 and 1 XP.
  await context.thereShouldBeNSCards(1, "Berry Bush"); //                                                      // * There should be 1 "Berry Bush" cards.
  await context.givenANewGame(); //                                                                            // * Given a new game.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Seed Idea", 1, 0); //                                      // * Given there is the "Seed Idea" idea at level 1 and 0 XP.
  await context.givenThereAreNStacksOfNSCards(1, 5, "Berry"); //                                               // * Given there are 1 stacks of 5 "Berry" cards.
  await context.givenThereAreNStacksOfNSNSAndNSCards(
    1,
    1,
    "Seed Idea",
    1,
    "Villager",
    1,
    "Apple"
  ); //         // * Given there are 1 stacks of 1 "Seed Idea", 1 "Villager", and 1 "Apple" cards.
  await context.givenThereAreNSCards(0, "Apple Tree"); //                                                      // * Given there are 0 "Apple Tree" cards.
  await context.theSCardShouldHaveNInSTag("Apple", 1, "Seed"); //                                              // * The "Apple" card should have 1 in "Seed" tag.
  await context.theSCardDescriptionShouldSaySIsS(
    "Apple",
    "Plant",
    "Apple Tree"
  ); //                           // * The "Apple" card description should say "Plant" is "Apple Tree".
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.thereShouldBeNSCards(1, "Apple Tree"); //                                                      // * There should be 1 "Apple Tree" cards.
  await context.givenANewGame(); //                                                                            // * Given a new game.
  await context.givenThereIsTheSIdeaAtLevelNAndNXp("Harvest Idea", 1, 0); //                                   // * Given there is the "Harvest Idea" idea at level 1 and 0 XP.
  await context.givenThereAreNStacksOfNSCards(1, 1, "Berry"); //                                               // * Given there are 1 stacks of 1 "Berry" cards.
  await context.givenThereAreNStacksOfNSNSAndNSCards(
    1,
    1,
    "Harvest Idea",
    1,
    "Villager",
    1,
    "Apple Tree"
  ); // // * Given there are 1 stacks of 1 "Harvest Idea", 1 "Villager", and 1 "Apple Tree" cards.
  await context.endTheCurrentMoon(); //                                                                        // * End the current moon.
  await context.thereShouldBeNSCards(1, "Apple Tree"); //                                                      // * There should be 1 "Apple Tree" cards.

  await context.afterTest();
  await runWhenTestSuccessful();
});
